<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Práctica Arduino - Sensor Ultrasonido con LCD y OLED</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-blue-100 text-gray-800 min-h-screen flex flex-col">
  <header class="bg-blue-700 text-white p-6 text-center shadow-lg rounded-b-2xl">
    <h1 class="text-3xl font-bold">Práctica Arduino</h1>
    <p class="text-lg mt-2">Sensor Ultrasonido con Pantalla LCD y OLED</p>
  </header>

  <main class="max-w-5xl mx-auto p-6 space-y-10 flex-1">
    <!-- Descripción -->
    <section class="bg-white rounded-2xl shadow-md p-6">
      <h2 class="text-2xl font-semibold mb-4 text-blue-700">Descripción</h2>
      <p class="leading-relaxed">
        En este proyecto utilizamos un <strong>Arduino UNO</strong>, un sensor de ultrasonidos HC-SR04 y dos tipos de pantallas: una <strong>LCD 16x2</strong> con interfaz I2C y una <strong>pantalla OLED</strong>. 
        El sistema mide la distancia y la muestra en el monitor serial, la pantalla OLED y la LCD.
      </p>
    </section>

    <!-- Materiales -->
    <section class="bg-white rounded-2xl shadow-md p-6">
      <h2 class="text-2xl font-semibold mb-4 text-blue-700">Materiales</h2>
      <ul class="list-disc list-inside space-y-1">
        <li>Arduino UNO</li>
        <li>Protoboard</li>
        <li>Pantalla LCD 16x2 con I2C</li>
        <li>Pantalla OLED (I2C, 128x64)</li>
        <li>Sensor de ultrasonidos HC-SR04</li>
        <li>Cables Dupont</li>
      </ul>
    </section>

    <!-- Esquema -->
    <section class="bg-white rounded-2xl shadow-md p-6">
      <h2 class="text-2xl font-semibold mb-4 text-blue-700">Esquema de Conexión</h2>
      <p class="mb-4">Las conexiones se realizan de la siguiente forma:</p>
      <ul class="list-disc list-inside mb-6 space-y-1">
        <li><strong>HC-SR04:</strong> VCC → 5V, GND → GND, Trig → Pin 9, Echo → Pin 10</li>
        <li><strong>Pantalla LCD I2C:</strong> VCC → 5V, GND → GND, SDA → A4, SCL → A5</li>
        <li><strong>Pantalla OLED I2C:</strong> VCC → 5V, GND → GND, SDA → A4, SCL → A5</li>
      </ul>
      <iframe src="https://www.tinkercad.com/embed/evQV7cH6FR8?editbtn=1" class="w-full h-96 rounded-xl border-2 border-gray-400"></iframe>
    </section>

    <!-- Código -->
    <section class="bg-white rounded-2xl shadow-md p-6 relative">
      <h2 class="text-2xl font-semibold mb-4 text-blue-700">Código Arduino</h2>
      <p class="mb-4">Copia y pega este código en el IDE de Arduino:</p>
      <button onclick="copiarCodigo()" class="absolute top-6 right-6 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-md transition">Copiar código</button>
      <pre id="codigo" class="bg-black text-green-400 p-4 rounded-lg overflow-x-auto text-sm whitespace-pre-wrap">
#include &lt;Wire.h&gt;
#include &lt;Adafruit_GFX.h&gt;
#include &lt;Adafruit_SSD1306.h&gt;
#include &lt;hd44780.h&gt;
#include &lt;hd44780ioClass/hd44780_I2Cexp.h&gt;

#define ANCHO 128
#define ALTO 64
#define RESET -1
Adafruit_SSD1306 display(ANCHO, ALTO, &Wire, RESET);

hd44780_I2Cexp lcd;

const int trigPin = 9;
const int echoPin = 10;

long duracion;
int distancia;

void setup() {
  Serial.begin(9600);
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);

  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) {
    Serial.println(F("No se encuentra la OLED."));
    for(;;);
  }
  display.clearDisplay();
  display.setTextColor(SSD1306_WHITE);
  display.setTextSize(1);
  display.setCursor(0,0);
  display.println("Sensor Ultrasonico");
  display.display();

  int status = lcd.begin(16, 2);
  if (status) {
    Serial.print("LCD error: ");
    Serial.println(status);
    while (1);
  }
  lcd.backlight();
  lcd.setCursor(0,0);
  lcd.print("Sensor Ultrasonico");
  delay(2000);
}

void loop() {
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  duracion = pulseIn(echoPin, HIGH);
  distancia = duracion * 0.034 / 2;

  if(distancia < 2) distancia = 2;
  if(distancia > 400) distancia = 400;

  Serial.print("Distancia: ");
  Serial.print(distancia);
  Serial.println(" cm");

  display.clearDisplay();
  display.setTextSize(1);
  display.setCursor(0,0);
  display.println("Distancia:");
  display.setTextSize(2);
  display.setCursor(10,30);
  display.print(distancia);
  display.println(" cm");
  display.display();

  lcd.clear();
  lcd.setCursor(0,0);
  lcd.print("Distancia:");
  lcd.setCursor(0,1);
  lcd.print(distancia);
  lcd.print(" cm");

  delay(500);
}
      </pre>
      <div id="toast" class="hidden fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg">Código copiado ✅</div>
    </section>
  </main>

  <footer class="bg-blue-700 text-white text-center p-4 mt-6 rounded-t-2xl shadow-inner">
    <p>Práctica Arduino - Sensor Ultrasonido © 2025</p>
  </footer>

  <script>
    function copiarCodigo() {
      const codigo = document.getElementById("codigo").innerText;
      navigator.clipboard.writeText(codigo).then(() => {
        const toast = document.getElementById("toast");
        toast.classList.remove("hidden");
        setTimeout(() => {
          toast.classList.add("hidden");
        }, 2000);
      });
    }
  </script>
</body>
</html>
